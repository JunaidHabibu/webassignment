<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>webpage</title>
</head>
<body>
    <h1>login please :3</h1>

    <input id="email" placeholder="Email"><br><br>
    <button onclick="loginUser()">Register</button>

    <p id="status"></p>

    <script>
        function loginUser() {
            const user = {
                email: document.getElementById("email").value
            };

            fetch("/users/login", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(user)
            })
            .then(res => {
                if (!res.ok) throw new Error("Login failed");
                return res.json(); // â† this is boolean
            })
            .then(exists => {
                if (exists) {
                    window.location.href = "/welcome";
                } else {
                    document.getElementById("status").innerText =
                        "User not found. Please register.";
                }
            })
            .catch(err => {
                document.getElementById("status").innerText =
                    "Error logging in";
            });
        }
    </script>


</body>
</html>